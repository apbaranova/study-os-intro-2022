---
## Front matter
lang: ru-RU
title: Лабораторная работа No 13
author: |
	Анастасия Павловна Баранова, НБИбд-01-21\inst{1}
institute: |
	\inst{1}Российский Университет Дружбы Народов
date: 4 июня, Москва, 2022 г

## Formatting
toc: false
slide_level: 2
theme: metropolis
header-includes: 
 - \metroset{progressbar=frametitle,sectionpage=progressbar,numbering=fraction}
 - '\makeatletter'
 - '\beamer@ignorenonframefalse'
 - '\makeatother'
aspectratio: 43
section-titles: true
---

## Цель лабораторной работы

Целью данной лабораторной работы является приобрести простейшие навыки разработки, анализа, тестирования и отладки приложений в ОС типа UNIX/Linux на примере создания на языке программирования С калькулятора с простейшими функциями.

# Выполнение лабораторной работы

## В домашнем каталоге создам подкаталог ~/work/os/lab_prog.

![В домашнем каталоге создам подкаталог ~/work/os/lab_prog.](../report/image/13_1.png)

## Создам в нём файлы: calculate.h, calculate.c, main.c.

Это будет примитивнейший калькулятор, способный складывать, вычитать, умножать и делить, возводить число в степень, брать квадратный корень, вычислять sin, cos, tan. При запуске он будет запрашивать первое число, операцию, второе число. После этого программа выведет результат и остановится.

## Создам в нём файлы: calculate.h, calculate.c, main.c.

![Создам в нём файлы: calculate.h, calculate.c, main.c.](../report/image/13_2.png)

## Реализация функций калькулятора в файле calculate.c

![Реализация функций калькулятора в файле calculate.c.](../report/image/13_3.png)

## Интерфейсный файл calculate.h, описывающий формат вызова функции-калькулятора

![Интерфейсный файл calculate.h.](../report/image/13_4.png)

## Основной файл main.c, реализующий интерфейс пользователя к калькулятору

![Основной файл main.c.](../report/image/13_5.png)

## Выполню компиляцию программы посредством gcc

![Выполню компиляцию программы посредством gcc.](../report/image/13_6.png)

## Создам Makefile со следующим содержанием

![Создам Makefile со следующим содержанием.](../report/image/13_7.png)

## В содержании файла указаны флаги компиляции, тип компилятора и файлы, которые должен собрать сборщик.

## С помощью gdb выполню отладку программы calcul (перед использованием gdb исправлю Makefile):

## Запущу отладчик GDB, загрузив в него программу для отладки: gdb ./calcul

![Запущу отладчик GDB.](../report/image/13_8.png)

## Перед использованием gdb исправлю Makefile

![Перед использованием gdb исправлю Makefile.](../report/image/13_9.png)

## Для запуска программы внутри отладчика введу команду run: run

![Для запуска программы внутри отладчика введу команду run.](../report/image/13_10.png)

## Для постраничного (по 9 строк) просмотра исходного кода использую команду list: list

![Для постраничного просмотра кода использую команду list.](../report/image/13_11.png)

## Для просмотра строк с 12 по 15 основного файла использую list с параметрами: list 12,15

## Для просмотра определённых строк не основного файла использую list с параметрами: list calculate.c:20,29

![Использую list с параметрами: list calculate.c:20,29.](../report/image/13_12.png)

## Установлю точку останова в файле calculate.c на строке номер 21:

  list calculate.c:20,27
  break 21

## Установлю точку останова в файле calculate.c на строке номер 21

![Установлю точку останова.](../report/image/13_13.png)

## Выведу информацию об имеющихся в проекте точках останова: info breakpoints

![Выведу информацию об имеющихся точках останова.](../report/image/13_14.png)

## Запущу программу внутри отладчика и проверю, что программа остановится в момент прохождения точки останова:
  
  run
  5
  -
  backtrace

## Запущу программу внутри отладчика и проверю, что программа остановится в момент прохождения точки останова

![Запущу программу внутри отладчика.](../report/image/13_15.png)

## Отладчик выдал следующую информацию:

  #0 Calculate (Numeral=5, Operation=0x7fffffffd280 "-")
  at calculate.c:21
  #1 0x0000000000400b2b in main () at main.c:17
  а команда backtrace показала весь стек вызываемых функций от начала программы до текущего места.

## Посмотрю, чему равно на этом этапе значение переменной Numeral, введя: print Numeral

  На экран было выведено число 5.

## Посмотрю, чему равно на этом этапе значение переменной Numeral, введя: print Numeral

![Посмотрю, чему равно на этом этапе значение переменной Numeral.](../report/image/13_16.png)

## Сравню с результатом вывода на экран после использования команды: display Numeral

![Сравню с результатом вывода на экран после использования команды: display Numeral.](../report/image/13_17.png)

## Уберу точки останова:

  info breakpoints
  delete 1

## Уберу точки останова

![Уберу точки останова.](../report/image/13_18.png)

## С помощью утилиты splint проанализирую коды файлов calculate.c и main.c

![С помощью утилиты splint проанализирую код файла calculate.c.](../report/image/13_19.png)

## С помощью утилиты splint проанализирую коды файлов calculate.c и main.c

![С помощью утилиты splint проанализирую код файла main.c.](../report/image/13_20.png)

## Вывод

В ходе данной лабораторной работы я приобрела простейшие навыки разработки, анализа, тестирования и отладки приложений в ОС типа UNIX/Linux на примере создания на языке программирования С калькулятора с простейшими функциями.